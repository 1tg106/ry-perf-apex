<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.system.mapper.PerfScoreFlowMapper">
    
    <resultMap type="PerfScoreFlow" id="PerfScoreFlowResult">
        <result property="flowId"    column="flow_id"    />
        <result property="performanceId"    column="performance_id"    />
        <result property="step"    column="step"    />
        <result property="stepName"    column="step_name"    />
        <result property="scorerId"    column="scorer_id"    />
        <result property="scorerType"    column="scorer_type"    />
        <result property="score"    column="score"    />
        <result property="comment"    column="comment"    />
        <result property="status"    column="status"    />
        <result property="submitTime"    column="submit_time"    />
        <result property="delFlag"    column="del_flag"    />
        <result property="createTime"    column="create_time"    />
        <result property="updateTime"    column="update_time"    />
    </resultMap>

    <sql id="selectPerfScoreFlowVo">
        select flow_id, performance_id, step, step_name, scorer_id, scorer_type, score, comment, status, submit_time, del_flag, create_time, update_time from perf_score_flow
    </sql>

    <select id="selectPerfScoreFlowList" parameterType="PerfScoreFlow" resultMap="PerfScoreFlowResult">
        <include refid="selectPerfScoreFlowVo"/>
        <where>  
            <if test="performanceId != null "> and performance_id = #{performanceId}</if>
            <if test="step != null "> and step = #{step}</if>
            <if test="stepName != null  and stepName != ''"> and step_name like concat('%', #{stepName}, '%')</if>
            <if test="scorerId != null "> and scorer_id = #{scorerId}</if>
            <if test="scorerType != null  and scorerType != ''"> and scorer_type = #{scorerType}</if>
            <if test="score != null "> and score = #{score}</if>
            <if test="comment != null  and comment != ''"> and comment = #{comment}</if>
            <if test="status != null  and status != ''"> and status = #{status}</if>
            <if test="submitTime != null "> and submit_time = #{submitTime}</if>
        </where>
    </select>
    
    <select id="selectPerfScoreFlowByFlowId" parameterType="Long" resultMap="PerfScoreFlowResult">
        <include refid="selectPerfScoreFlowVo"/>
        where flow_id = #{flowId}
    </select>

    <insert id="insertPerfScoreFlow" parameterType="PerfScoreFlow" useGeneratedKeys="true" keyProperty="flowId">
        insert into perf_score_flow
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="performanceId != null">performance_id,</if>
            <if test="step != null">step,</if>
            <if test="stepName != null and stepName != ''">step_name,</if>
            <if test="scorerId != null">scorer_id,</if>
            <if test="scorerType != null and scorerType != ''">scorer_type,</if>
            <if test="score != null">score,</if>
            <if test="comment != null">comment,</if>
            <if test="status != null and status != ''">status,</if>
            <if test="submitTime != null">submit_time,</if>
            <if test="delFlag != null">del_flag,</if>
            <if test="createTime != null">create_time,</if>
            <if test="updateTime != null">update_time,</if>
         </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="performanceId != null">#{performanceId},</if>
            <if test="step != null">#{step},</if>
            <if test="stepName != null and stepName != ''">#{stepName},</if>
            <if test="scorerId != null">#{scorerId},</if>
            <if test="scorerType != null and scorerType != ''">#{scorerType},</if>
            <if test="score != null">#{score},</if>
            <if test="comment != null">#{comment},</if>
            <if test="status != null and status != ''">#{status},</if>
            <if test="submitTime != null">#{submitTime},</if>
            <if test="delFlag != null">#{delFlag},</if>
            <if test="createTime != null">#{createTime},</if>
            <if test="updateTime != null">#{updateTime},</if>
         </trim>
    </insert>

    <update id="updatePerfScoreFlow" parameterType="PerfScoreFlow">
        update perf_score_flow
        <trim prefix="SET" suffixOverrides=",">
            <if test="performanceId != null">performance_id = #{performanceId},</if>
            <if test="step != null">step = #{step},</if>
            <if test="stepName != null and stepName != ''">step_name = #{stepName},</if>
            <if test="scorerId != null">scorer_id = #{scorerId},</if>
            <if test="scorerType != null and scorerType != ''">scorer_type = #{scorerType},</if>
            <if test="score != null">score = #{score},</if>
            <if test="comment != null">comment = #{comment},</if>
            <if test="status != null and status != ''">status = #{status},</if>
            <if test="submitTime != null">submit_time = #{submitTime},</if>
            <if test="delFlag != null">del_flag = #{delFlag},</if>
            <if test="createTime != null">create_time = #{createTime},</if>
            <if test="updateTime != null">update_time = #{updateTime},</if>
        </trim>
        where flow_id = #{flowId}
    </update>

    <delete id="deletePerfScoreFlowByFlowId" parameterType="Long">
        delete from perf_score_flow where flow_id = #{flowId}
    </delete>

    <delete id="deletePerfScoreFlowByFlowIds" parameterType="String">
        delete from perf_score_flow where flow_id in 
        <foreach item="flowId" collection="array" open="(" separator="," close=")">
            #{flowId}
        </foreach>
    </delete>
</mapper>